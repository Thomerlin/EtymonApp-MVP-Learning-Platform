<div class="dashboard-container">
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading your dashboard...</p>
  </div>

  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- User Welcome Section -->
    <div class="welcome-section">
      <div class="user-info">
        <div class="avatar-container">
          <img *ngIf="userData?.profile_picture" [src]="userData.profile_picture" alt="Profile picture"
            class="profile-image">
          <div class="avatar-placeholder" *ngIf="!userData?.profile_picture">
            {{ userData.display_name?.charAt(0) || 'U' }}
          </div>
        </div>
        <div class="user-details">
          <h1>Hello, {{ userData.display_name || 'Student' }}!</h1>
          <p>Welcome back to your learning journey.</p>
          <small class="user-email" *ngIf="userData?.email">{{ userData.email }}</small>
        </div>
      </div>
    </div>

    <!-- Progress Statistics Cards -->
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-icon">
          <img src="assets/icons/completed-exercises.svg" alt="Completed exercises icon">
        </div>
        <div class="stat-info">
          <h3>{{ userStats.solvedExercises }}</h3>
          <p>Completed Exercises</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <img src="assets/icons/read-articles.svg" alt="Read articles icon">
        </div>
        <div class="stat-info">
          <h3>{{ userStats.readArticles.count }}</h3>
          <p>Articles Read</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">
          <img src="assets/icons/achieved-levels.svg" alt="Achieved levels icon">
        </div>
        <div class="stat-info">
          <h3>{{ levelProgressData.length || 0 }}</h3>
          <p>Levels Achieved</p>
        </div>
      </div>
    </div>

    <!-- Language Level Progress Section -->
    <div class="level-progress-section">
      <div class="section-header">
        <h2>Your Level Progress</h2>
        <!-- <div class="action-buttons">
          <button class="action-btn">View Details</button>
        </div> -->
      </div>

      <div class="levels-grid">
        <div class="level-card" *ngFor="let level of levelProgressData"
          [ngClass]="'level-' + level.level.toLowerCase()">
          <div class="level-content">
            <div class="level-header">
              <h3>Level {{ level.level }}</h3>
            </div>
            <div class="level-stats">
              <div class="exercises-count">
                <i class="fas fa-check-circle"></i>
                <span><strong>{{ level.solvedExercises }}</strong> exercises solved</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Empty level card to encourage progress -->
        <div class="level-card empty-level" *ngIf="levelProgressData.length < 6">
          <div class="empty-level-content">
            <div class="empty-level-icon">
              <i class="fas fa-plus-circle"></i>
            </div>
            <h3>Next Level</h3>
            <p>Keep practicing to unlock more levels</p>
            <button class="explore-btn" (click)="navigateToHome()">Explore</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activity / Learning Streak -->
    <!-- <div class="activity-section">
      <div class="section-header">
        <h2>Your Recent Activity</h2>
      </div>
      <div class="streak-container">
        <div class="streak-info">
          <div class="streak-icon">
            <i class="fas fa-fire"></i>
          </div>
          <div class="streak-text">
            <h3>3 Days</h3>
            <p>Learning streak! Keep it up!</p>
          </div>
        </div>
        <div class="streak-calendar">
          <div class="calendar-day active">M</div>
          <div class="calendar-day active">T</div>
          <div class="calendar-day active">W</div>
          <div class="calendar-day">T</div>
          <div class="calendar-day">F</div>
          <div class="calendar-day">S</div>
          <div class="calendar-day">S</div>
        </div>
      </div>
    </div> -->

    <!-- Recommended Next Steps -->
    <!-- <div class="recommendations-section">
      <div class="section-header">
        <h2>Recommended for You</h2>
      </div>
      <div class="recommendations-grid">
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-puzzle-piece"></i>
          </div>
          <h3>Vocabulary Exercises</h3>
          <p>Strengthen your vocabulary with daily exercises</p>
          <button class="recommendation-btn">Start</button>
        </div>
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-headphones"></i>
          </div>
          <h3>Listening Practice</h3>
          <p>Improve your listening comprehension with authentic audio</p>
          <button class="recommendation-btn">Start</button>
        </div>
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-comment-dots"></i>
          </div>
          <h3>Conversation</h3>
          <p>Practice common dialogues in everyday situations</p>
          <button class="recommendation-btn">Start</button>
        </div>
      </div>
    </div> -->
  </div>
</div>